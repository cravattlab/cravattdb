<table class="ui selectable celled table" [ngSwitch]="byPeptide">
    <tbody *ngIf="!data">
        <tr>
            <td style="padding:0" colspan="6">
                <div style="height:100px" class="ui attached segment">
                    <div class="ui active inverted dimmer">
                        <div class="ui text medium loader">Loading Data</div>
                    </div>
                </div>
            </td>
        </tr>
    </tbody>
    <template [ngSwitchWhen]="false">
        <thead>
            <tr>
                <th>Uniprot</th>
                <th>Symbol</th>
                <th colspan="2">Description</th>
                <th>Mean Ratio</th>
                <th class="center aligned" rowspan="2"><i class="area chart big icon"></i></th>
            </tr>
            <tr *ngIf="!collapsed">
                <th>Sequence</th>
                <th>Mass</th>
                <th>Charge</th>
                <th>Segment</th>
                <th>Ratio</th>
            </tr>
        </thead>
        <tbody *ngFor="let row of data | groupByProtein">
            <tr class="active">
                <td>{{ row.groupKey }}</td>
                <td>{{ row.symbol }}</td>
                <td colspan="2">{{ row.description }}</td>
                <td class="mean-ratio" [style.background-color]="scale(row.mean/20)">{{ row.mean }}</td>
                <td></td>
            </tr>
            <template [ngIf]="!collapsed">
                <tr *ngFor="let group of row.columns">
                    <td *ngFor="let column of group.data">{{ column }}</td>
                    <td [style.background-color]="scale(group.ratio[0]/20)">{{ group.ratio[0] }}</td>
                    <td class="center aligned"><a [href]="'legacy/1/' + id + '/chromatogram/' + group.chromatogram[0]"><i class="area chart link icon"></i></a></td>
                </tr>
            </template>
        </tbody>
    </template>

    <template [ngSwitchWhen]="true">
        <thead>
            <tr>
                <th colspan="6">Sequence</th>
                <th>Mean Ratio</th>
                <th class="center aligned" rowspan="2"><i class="area chart big icon"></i></th>
            </tr>
            <tr *ngIf="!collapsed">
                <th>Uniprot</th>
                <th>Symbol</th>
                <th>Description</th>
                <th>Mass</th>
                <th>Charge</th>
                <th>Segment</th>
                <th>Ratio</th>
            </tr>
        </thead>
        <tbody *ngFor="let row of data | groupByPeptide">
            <tr class="active">
                <td colspan="6">{{ row.groupKey }}</td>
                <td class="mean-ratio" [style.background-color]="scale(row.mean/20)">{{ row.mean }}</td>
                <td></td>
            </tr>
            <template [ngIf]="!collapsed">
                <tr *ngFor="let group of row.columns">
                    <td *ngFor="let column of group.data">{{ column }}</td>
                    <td [style.background-color]="scale(group.ratio[0]/20)">{{ group.ratio[0] }}</td>
                    <td class="center aligned"><a [href]="'legacy/1/' + id + '/chromatogram/' + group.chromatogram[0]"><i class="area chart link icon"></i></a></td>
                </tr>
            </template>
        </tbody>
    </template>
</table>